C51 COMPILER V9.56.0.0   MAIN                                                              04/08/2018 17:34:38 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN \\192.168.2.201\Users\zhongzuan\main.obj
COMPILER INVOKED BY: D:\Program Files (x86)\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Lib;..\Lib
                    -\inc;..\Lib\src;..\sourses) DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) TABS(2) OBJECT(\\192.168.2.201\Users\zhongzuan
                    -\main.obj)

line level    source

   1          #include "common.h"
   2          #include "oled.h"
   3          #include "MAX30100.h"
   4          #include "Display.h"
   5          #include "Timer.h"
   6          #include "Uart.h"
   7          //#include "Power.h"
   8          
   9          unsigned char xdata Mode;
  10          
  11          enum FucState
  12          {
  13            TimeMode=1,
  14            HeartRateMode,
  15            StepMode
  16          };
  17          
  18          void main()
  19          {
  20   1      
  21   1        
  22   1      
  23   1      
  24   1        unsigned char ID=0 ;
  25   1        
  26   1        P_SW2=0xb0;
  27   1        I2CCFG=0xe0;
  28   1        I2CMSST=0x00;
  29   1      
  30   1        // MAX30100_startTemperatureSampling();
  31   1        
  32   1        //  powerInit();
  33   1      
  34   1        Timer0Init();
  35   1        Mode=TimeMode;
  36   1      
  37   1        MAX30100_writeRegister(0x06,0x0b);
  38   1        MAX30100_writeRegister(0x01,0xf0);
  39   1        MAX30100_writeRegister(0x09,0x33);
  40   1        
  41   1        Uart2Init();
  42   1        Timer0Init();
  43   1      
  44   1        OLED_Init();
  45   1      
  46   1        displayHoursH(0);
  47   1        displayHoursL(0);
  48   1        displayColon(0xff);
  49   1        displayMinuteH(0);
  50   1        displayMinuteL(0);
  51   1        displayIcon_Battery(4,0xff);
  52   1        displayIcon_Bluetooth(0xff);
  53   1      
C51 COMPILER V9.56.0.0   MAIN                                                              04/08/2018 17:34:38 PAGE 2   

  54   1        Uart2SendStr("Started!\n");
  55   1        
  56   1      
  57   1      
  58   1      
  59   1        while(1)
  60   1        {
  61   2      
  62   2      
  63   2          while(Mode==TimeMode)
  64   2          {
  65   3      
  66   3            ////´®¿ÚÃüÁî
  67   3      
  68   3            if (Rptr != Wptr)
  69   3            {
  70   4              ID=MAX30100_getPartID();
  71   4              Uart2SendChar(buffer[Rptr++]);
  72   4              Uart2SendChar(ID);
  73   4              
  74   4              Rptr &= 0x0f;
  75   4            }
  76   3            ///////
  77   3                
  78   3            if(isSecondChange)
  79   3            {
  80   4              displayColon(0x00);
  81   4            
  82   4              isSecondChange=0;
  83   4            }
  84   3      
  85   3            if(TickCount==25) displayColon(0xff);
  86   3      
  87   3            if(isMinuteChange)
  88   3            {
  89   4              displayMinuteL(Minute%10);
  90   4              if((Minute/10)!=preMinuteH)
  91   4              { 
  92   5                preMinuteH=Minute/10;
  93   5                displayMinuteH(preMinuteH);
  94   5                
  95   5              }
  96   4              isMinuteChange=0;
  97   4      
  98   4            }
  99   3            if(isHourChange)
 100   3            {
 101   4              displayHoursL(Hour%10);
 102   4              if((Hour/10)!=preHourH) 
 103   4              {
 104   5                preHourH=Hour/10;
 105   5                displayHoursH(preHourH);
 106   5              }
 107   4              isHourChange=0;
 108   4            }
 109   3      
 110   3      
 111   3          
 112   3        //  getBatteryState();
 113   3        //  displayIcon_Battery(4,0xff);
 114   3          
 115   3        
C51 COMPILER V9.56.0.0   MAIN                                                              04/08/2018 17:34:38 PAGE 3   

 116   3          }
 117   2      
 118   2          while(Mode==HeartRateMode)
 119   2          {
 120   3      
 121   3          }
 122   2          while(Mode==StepMode)
 123   2          {
 124   3      
 125   3      
 126   3          }
 127   2      
 128   2      
 129   2        }
 130   1      
 131   1        
 132   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    349    ----
   CONSTANT SIZE    =     10    ----
   XDATA SIZE       =      1    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
